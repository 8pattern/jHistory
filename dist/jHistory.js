!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jHistory=t():e.jHistory=t()}(global,(function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){"use strict";r.r(t);var n=5,i=1<<n,o=i-1,u={};function SetRef(e){e&&(e.value=!0)}function OwnerID(){}function ensureSize(e){return e.size===undefined&&(e.size=e.__iterate(returnTrue)),e.size}function wrapIndex(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?ensureSize(e)+t:t}function returnTrue(){return!0}function wholeSlice(e,t,r){return(0===e&&!isNeg(e)||r!==undefined&&e<=-r)&&(t===undefined||r!==undefined&&t>=r)}function resolveBegin(e,t){return resolveIndex(e,t,0)}function resolveEnd(e,t){return resolveIndex(e,t,t)}function resolveIndex(e,t,r){return e===undefined?r:isNeg(e)?t===Infinity?t:0|Math.max(0,t+e):t===undefined||t===e?e:0|Math.min(t,e)}function isNeg(e){return e<0||0===e&&1/e==-Infinity}var a="@@__IMMUTABLE_ITERABLE__@@";function isCollection(e){return Boolean(e&&e[a])}var s="@@__IMMUTABLE_KEYED__@@";function isKeyed(e){return Boolean(e&&e[s])}var c="@@__IMMUTABLE_INDEXED__@@";function isIndexed(e){return Boolean(e&&e[c])}function isAssociative(e){return isKeyed(e)||isIndexed(e)}var f=function(e){return isCollection(e)?e:O(e)},h=function(e){function KeyedCollection(e){return isKeyed(e)?e:M(e)}return e&&(KeyedCollection.__proto__=e),KeyedCollection.prototype=Object.create(e&&e.prototype),KeyedCollection.prototype.constructor=KeyedCollection,KeyedCollection}(f),p=function(e){function IndexedCollection(e){return isIndexed(e)?e:k(e)}return e&&(IndexedCollection.__proto__=e),IndexedCollection.prototype=Object.create(e&&e.prototype),IndexedCollection.prototype.constructor=IndexedCollection,IndexedCollection}(f),d=function(e){function SetCollection(e){return isCollection(e)&&!isAssociative(e)?e:z(e)}return e&&(SetCollection.__proto__=e),SetCollection.prototype=Object.create(e&&e.prototype),SetCollection.prototype.constructor=SetCollection,SetCollection}(f);f.Keyed=h,f.Indexed=p,f.Set=d;var l="@@__IMMUTABLE_SEQ__@@";function isSeq(e){return Boolean(e&&e[l])}var _="@@__IMMUTABLE_RECORD__@@";function isRecord(e){return Boolean(e&&e[_])}function isImmutable(e){return isCollection(e)||isRecord(e)}var y="@@__IMMUTABLE_ORDERED__@@";function isOrdered(e){return Boolean(e&&e[y])}var v=0,S=1,m=2,g="function"==typeof Symbol&&Symbol.iterator,I="@@iterator",w=g||I,q=function(e){this.next=e};function iteratorValue(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function iteratorDone(){return{value:undefined,done:!0}}function hasIterator(e){return!!getIteratorFn(e)}function isIterator(e){return e&&"function"==typeof e.next}function getIterator(e){var t=getIteratorFn(e);return t&&t.call(e)}function getIteratorFn(e){var t=e&&(g&&e[g]||e[I]);if("function"==typeof t)return t}q.prototype.toString=function(){return"[Iterator]"},q.KEYS=v,q.VALUES=S,q.ENTRIES=m,q.prototype.inspect=q.prototype.toSource=function(){return this.toString()},q.prototype[w]=function(){return this};var b=Object.prototype.hasOwnProperty;function isArrayLike(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var O=function(e){function Seq(e){return null===e||e===undefined?emptySequence():isImmutable(e)?e.toSeq():function(e){var t=maybeIndexedSeqFromValue(e);if(t)return t;if("object"==typeof e)return new D(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(Seq.__proto__=e),Seq.prototype=Object.create(e&&e.prototype),Seq.prototype.constructor=Seq,Seq.prototype.toSeq=function(){return this},Seq.prototype.toString=function(){return this.__toString("Seq {","}")},Seq.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Seq.prototype.__iterate=function(e,t){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[t?n-++i:i++];if(!1===e(o[1],o[0],this))break}return i}return this.__iterateUncached(e,t)},Seq.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,i=0;return new q((function(){if(i===n)return iteratorDone();var o=r[t?n-++i:i++];return iteratorValue(e,o[0],o[1])}))}return this.__iteratorUncached(e,t)},Seq}(f),M=function(e){function KeyedSeq(e){return null===e||e===undefined?emptySequence().toKeyedSeq():isCollection(e)?isKeyed(e)?e.toSeq():e.fromEntrySeq():isRecord(e)?e.toSeq():keyedSeqFromValue(e)}return e&&(KeyedSeq.__proto__=e),KeyedSeq.prototype=Object.create(e&&e.prototype),KeyedSeq.prototype.constructor=KeyedSeq,KeyedSeq.prototype.toKeyedSeq=function(){return this},KeyedSeq}(O),k=function(e){function IndexedSeq(e){return null===e||e===undefined?emptySequence():isCollection(e)?isKeyed(e)?e.entrySeq():e.toIndexedSeq():isRecord(e)?e.toSeq().entrySeq():indexedSeqFromValue(e)}return e&&(IndexedSeq.__proto__=e),IndexedSeq.prototype=Object.create(e&&e.prototype),IndexedSeq.prototype.constructor=IndexedSeq,IndexedSeq.of=function(){return IndexedSeq(arguments)},IndexedSeq.prototype.toIndexedSeq=function(){return this},IndexedSeq.prototype.toString=function(){return this.__toString("Seq [","]")},IndexedSeq}(O),z=function(e){function SetSeq(e){return(isCollection(e)&&!isAssociative(e)?e:k(e)).toSetSeq()}return e&&(SetSeq.__proto__=e),SetSeq.prototype=Object.create(e&&e.prototype),SetSeq.prototype.constructor=SetSeq,SetSeq.of=function(){return SetSeq(arguments)},SetSeq.prototype.toSetSeq=function(){return this},SetSeq}(O);O.isSeq=isSeq,O.Keyed=M,O.Set=z,O.Indexed=k,O.prototype[l]=!0;var x=function(e){function ArraySeq(e){this._array=e,this.size=e.length}return e&&(ArraySeq.__proto__=e),ArraySeq.prototype=Object.create(e&&e.prototype),ArraySeq.prototype.constructor=ArraySeq,ArraySeq.prototype.get=function(e,t){return this.has(e)?this._array[wrapIndex(this,e)]:t},ArraySeq.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length,i=0;i!==n;){var o=t?n-++i:i++;if(!1===e(r[o],o,this))break}return i},ArraySeq.prototype.__iterator=function(e,t){var r=this._array,n=r.length,i=0;return new q((function(){if(i===n)return iteratorDone();var o=t?n-++i:i++;return iteratorValue(e,o,r[o])}))},ArraySeq}(k),D=function(e){function ObjectSeq(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}return e&&(ObjectSeq.__proto__=e),ObjectSeq.prototype=Object.create(e&&e.prototype),ObjectSeq.prototype.constructor=ObjectSeq,ObjectSeq.prototype.get=function(e,t){return t===undefined||this.has(e)?this._object[e]:t},ObjectSeq.prototype.has=function(e){return b.call(this._object,e)},ObjectSeq.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var u=n[t?i-++o:o++];if(!1===e(r[u],u,this))break}return o},ObjectSeq.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,i=n.length,o=0;return new q((function(){if(o===i)return iteratorDone();var u=n[t?i-++o:o++];return iteratorValue(e,u,r[u])}))},ObjectSeq}(M);D.prototype[y]=!0;var E,j=function(e){function CollectionSeq(e){this._collection=e,this.size=e.length||e.size}return e&&(CollectionSeq.__proto__=e),CollectionSeq.prototype=Object.create(e&&e.prototype),CollectionSeq.prototype.constructor=CollectionSeq,CollectionSeq.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=getIterator(this._collection),n=0;if(isIterator(r))for(var i;!(i=r.next()).done&&!1!==e(i.value,n++,this););return n},CollectionSeq.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=getIterator(this._collection);if(!isIterator(r))return new q(iteratorDone);var n=0;return new q((function(){var t=r.next();return t.done?t:iteratorValue(e,n++,t.value)}))},CollectionSeq}(k);function emptySequence(){return E||(E=new x([]))}function keyedSeqFromValue(e){var t=Array.isArray(e)?new x(e):hasIterator(e)?new j(e):undefined;if(t)return t.fromEntrySeq();if("object"==typeof e)return new D(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function indexedSeqFromValue(e){var t=maybeIndexedSeqFromValue(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function maybeIndexedSeqFromValue(e){return isArrayLike(e)?new x(e):hasIterator(e)?new j(e):undefined}var R="@@__IMMUTABLE_MAP__@@";function isMap(e){return Boolean(e&&e[R])}function isOrderedMap(e){return isMap(e)&&isOrdered(e)}function isValueObject(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function is(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(isValueObject(e)&&isValueObject(t)&&e.equals(t))}var A="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function smi(e){return e>>>1&1073741824|3221225471&e}var C=Object.prototype.valueOf;function hash(e){switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return function(e){if(e!=e||e===Infinity)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return smi(t)}(e);case"string":return e.length>B?function(e){var t=U[e];t===undefined&&(t=hashString(e),P===W&&(P=0,U={}),P++,U[e]=t);return t}(e):hashString(e);case"object":case"function":return null===e?1108378658:"function"==typeof e.hashCode?smi(e.hashCode(e)):(e.valueOf!==C&&"function"==typeof e.valueOf&&(e=e.valueOf(e)),function(e){var t;if(F&&(t=T.get(e))!==undefined)return t;if((t=e[V])!==undefined)return t;if(!L){if((t=e.propertyIsEnumerable&&e.propertyIsEnumerable[V])!==undefined)return t;if((t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e))!==undefined)return t}t=++N,1073741824&N&&(N=0);if(F)T.set(e,t);else{if(K!==undefined&&!1===K(e))throw new Error("Non-extensible objects are not allowed as keys.");if(L)Object.defineProperty(e,V,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable!==undefined&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[V]=t;else{if(e.nodeType===undefined)throw new Error("Unable to set a non-enumerable property on object.");e[V]=t}}return t}(e));case"undefined":return 1108378659;default:if("function"==typeof e.toString)return hashString(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function hashString(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return smi(t)}var K=Object.isExtensible,L=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();var T,F="function"==typeof WeakMap;F&&(T=new WeakMap);var N=0,V="__immutablehash__";"function"==typeof Symbol&&(V=Symbol(V));var B=16,W=255,P=0,U={},$=function(e){function ToKeyedSequence(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(ToKeyedSequence.__proto__=e),ToKeyedSequence.prototype=Object.create(e&&e.prototype),ToKeyedSequence.prototype.constructor=ToKeyedSequence,ToKeyedSequence.prototype.get=function(e,t){return this._iter.get(e,t)},ToKeyedSequence.prototype.has=function(e){return this._iter.has(e)},ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq()},ToKeyedSequence.prototype.reverse=function(){var e=this,t=reverseFactory(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},ToKeyedSequence.prototype.map=function(e,t){var r=this,n=mapFactory(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},ToKeyedSequence.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t,n){return e(t,n,r)}),t)},ToKeyedSequence.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},ToKeyedSequence}(M);$.prototype[y]=!0;var J=function(e){function ToIndexedSequence(e){this._iter=e,this.size=e.size}return e&&(ToIndexedSequence.__proto__=e),ToIndexedSequence.prototype=Object.create(e&&e.prototype),ToIndexedSequence.prototype.constructor=ToIndexedSequence,ToIndexedSequence.prototype.includes=function(e){return this._iter.includes(e)},ToIndexedSequence.prototype.__iterate=function(e,t){var r=this,n=0;return t&&ensureSize(this),this._iter.__iterate((function(i){return e(i,t?r.size-++n:n++,r)}),t)},ToIndexedSequence.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(S,t),i=0;return t&&ensureSize(this),new q((function(){var o=n.next();return o.done?o:iteratorValue(e,t?r.size-++i:i++,o.value,o)}))},ToIndexedSequence}(k),H=function(e){function ToSetSequence(e){this._iter=e,this.size=e.size}return e&&(ToSetSequence.__proto__=e),ToSetSequence.prototype=Object.create(e&&e.prototype),ToSetSequence.prototype.constructor=ToSetSequence,ToSetSequence.prototype.has=function(e){return this._iter.includes(e)},ToSetSequence.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},ToSetSequence.prototype.__iterator=function(e,t){var r=this._iter.__iterator(S,t);return new q((function(){var t=r.next();return t.done?t:iteratorValue(e,t.value,t.value,t)}))},ToSetSequence}(z),Z=function(e){function FromEntriesSequence(e){this._iter=e,this.size=e.size}return e&&(FromEntriesSequence.__proto__=e),FromEntriesSequence.prototype=Object.create(e&&e.prototype),FromEntriesSequence.prototype.constructor=FromEntriesSequence,FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq()},FromEntriesSequence.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){validateEntry(t);var n=isCollection(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},FromEntriesSequence.prototype.__iterator=function(e,t){var r=this._iter.__iterator(S,t);return new q((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){validateEntry(n);var i=isCollection(n);return iteratorValue(e,i?n.get(0):n[0],i?n.get(1):n[1],t)}}}))},FromEntriesSequence}(M);function flipFactory(e){var t=makeSequence(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=cacheResultThrough,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(t===m){var n=e.__iterator(t,r);return new q((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===S?v:S,r)},t}function mapFactory(e,t,r){var n=makeSequence(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var o=e.get(n,u);return o===u?i:t.call(r,o,n,e)},n.__iterateUncached=function(n,i){var o=this;return e.__iterate((function(e,i,u){return!1!==n(t.call(r,e,i,u),i,o)}),i)},n.__iteratorUncached=function(n,i){var o=e.__iterator(m,i);return new q((function(){var i=o.next();if(i.done)return i;var u=i.value,a=u[0];return iteratorValue(n,a,t.call(r,u[1],a,e),i)}))},n}function reverseFactory(e,t){var r=this,n=makeSequence(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=flipFactory(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=cacheResultThrough,n.__iterate=function(r,n){var i=this,o=0;return n&&ensureSize(e),e.__iterate((function(e,u){return r(e,t?u:n?i.size-++o:o++,i)}),!n)},n.__iterator=function(n,i){var o=0;i&&ensureSize(e);var u=e.__iterator(m,!i);return new q((function(){var e=u.next();if(e.done)return e;var a=e.value;return iteratorValue(n,t?a[0]:i?r.size-++o:o++,a[1],e)}))},n}function filterFactory(e,t,r,n){var i=makeSequence(e);return n&&(i.has=function(n){var i=e.get(n,u);return i!==u&&!!t.call(r,i,n,e)},i.get=function(n,i){var o=e.get(n,u);return o!==u&&t.call(r,o,n,e)?o:i}),i.__iterateUncached=function(i,o){var u=this,a=0;return e.__iterate((function(e,o,s){if(t.call(r,e,o,s))return a++,i(e,n?o:a-1,u)}),o),a},i.__iteratorUncached=function(i,o){var u=e.__iterator(m,o),a=0;return new q((function(){for(;;){var o=u.next();if(o.done)return o;var s=o.value,c=s[0],f=s[1];if(t.call(r,f,c,e))return iteratorValue(i,n?c:a++,f,o)}}))},i}function sliceFactory(e,t,r,n){var i=e.size;if(wholeSlice(t,r,i))return e;var o=resolveBegin(t,i),u=resolveEnd(r,i);if(o!=o||u!=u)return sliceFactory(e.toSeq().cacheResult(),t,r,n);var a,s=u-o;s==s&&(a=s<0?0:s);var c=makeSequence(e);return c.size=0===a?a:e.size&&a||undefined,!n&&isSeq(e)&&a>=0&&(c.get=function(t,r){return(t=wrapIndex(this,t))>=0&&t<a?e.get(t+o,r):r}),c.__iterateUncached=function(t,r){var i=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(t,r);var u=0,s=!0,c=0;return e.__iterate((function(e,r){if(!s||!(s=u++<o))return c++,!1!==t(e,n?r:c-1,i)&&c!==a})),c},c.__iteratorUncached=function(t,r){if(0!==a&&r)return this.cacheResult().__iterator(t,r);if(0===a)return new q(iteratorDone);var i=e.__iterator(t,r),u=0,s=0;return new q((function(){for(;u++<o;)i.next();if(++s>a)return iteratorDone();var e=i.next();return n||t===S||e.done?e:iteratorValue(t,s-1,t===v?undefined:e.value[1],e)}))},c}function skipWhileFactory(e,t,r,n){var i=makeSequence(e);return i.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,s=0;return e.__iterate((function(e,o,c){if(!a||!(a=t.call(r,e,o,c)))return s++,i(e,n?o:s-1,u)})),s},i.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var a=e.__iterator(m,o),s=!0,c=0;return new q((function(){var e,o,f;do{if((e=a.next()).done)return n||i===S?e:iteratorValue(i,c++,i===v?undefined:e.value[1],e);var h=e.value;o=h[0],f=h[1],s&&(s=t.call(r,f,o,u))}while(s);return i===m?e:iteratorValue(i,o,f,e)}))},i}function concatFactory(e,t){var r=isKeyed(e),n=[e].concat(t).map((function(e){return isCollection(e)?r&&(e=h(e)):e=r?keyedSeqFromValue(e):indexedSeqFromValue(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===n.length)return e;if(1===n.length){var i=n[0];if(i===e||r&&isKeyed(i)||isIndexed(e)&&isIndexed(i))return i}var o=new x(n);return r?o=o.toKeyedSeq():isIndexed(e)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce((function(e,t){if(e!==undefined){var r=t.size;if(r!==undefined)return e+r}}),0),o}function flattenFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var u=0,a=!1;return function flatDeep(e,s){e.__iterate((function(e,o){return(!t||s<t)&&isCollection(e)?flatDeep(e,s+1):(u++,!1===i(e,r?o:u-1,n)&&(a=!0)),!a}),o)}(e,0),u},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(n,i),u=[],a=0;return new q((function(){for(;o;){var e=o.next();if(!1===e.done){var s=e.value;if(n===m&&(s=s[1]),t&&!(u.length<t)||!isCollection(s))return r?e:iteratorValue(n,a++,s,e);u.push(o),o=s.__iterator(n,i)}else o=u.pop()}return iteratorDone()}))},n}function sortFactory(e,t,r){t||(t=defaultComparator);var n=isKeyed(e),i=0,o=e.toSeq().map((function(t,n){return[n,t,i++,r?r(t,n,e):t]})).valueSeq().toArray();return o.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),n?M(o):isIndexed(e)?k(o):z(o)}function maxFactory(e,t,r){if(t||(t=defaultComparator),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return maxCompare(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return maxCompare(t,e,r)?r:e}))}function maxCompare(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(r===undefined||null===r||r!=r)||n>0}function zipWithFactory(e,t,r,n){var i=makeSequence(e),o=new x(r).map((function(e){return e.size}));return i.size=n?o.max():o.min(),i.__iterate=function(e,t){for(var r,n=this.__iterator(S,t),i=0;!(r=n.next()).done&&!1!==e(r.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map((function(e){return e=f(e),getIterator(i?e.reverse():e)})),u=0,a=!1;return new q((function(){var r;return a||(r=o.map((function(e){return e.next()})),a=n?r.every((function(e){return e.done})):r.some((function(e){return e.done}))),a?iteratorDone():iteratorValue(e,u++,t.apply(null,r.map((function(e){return e.value}))))}))},i}function reify(e,t){return e===t?e:isSeq(e)?t:e.constructor(t)}function validateEntry(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function collectionClass(e){return isKeyed(e)?h:isIndexed(e)?p:d}function makeSequence(e){return Object.create((isKeyed(e)?M:isIndexed(e)?k:z).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):O.prototype.cacheResult.call(this)}function defaultComparator(e,t){return e===undefined&&t===undefined?0:e===undefined?1:t===undefined?-1:e>t?1:e<t?-1:0}function arrCopy(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function invariant(e,t){if(!e)throw new Error(t)}function assertNotInfinite(e){invariant(e!==Infinity,"Cannot perform this action with an infinite size.")}function coerceKeyPath(e){if(isArrayLike(e)&&"string"!=typeof e)return e;if(isOrdered(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}function isPlainObj(e){return e&&("function"!=typeof e.constructor||"Object"===e.constructor.name)}function isDataStructure(e){return"object"==typeof e&&(isImmutable(e)||Array.isArray(e)||isPlainObj(e))}function quoteString(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function has(e,t){return isImmutable(e)?e.has(t):isDataStructure(e)&&b.call(e,t)}function get(e,t,r){return isImmutable(e)?e.get(t,r):has(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function shallowCopy(e){if(Array.isArray(e))return arrCopy(e);var t={};for(var r in e)b.call(e,r)&&(t[r]=e[r]);return t}function remove(e,t){if(!isDataStructure(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(isImmutable(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!b.call(e,t))return e;var r=shallowCopy(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}function set(e,t,r){if(!isDataStructure(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(isImmutable(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(b.call(e,t)&&r===e[t])return e;var n=shallowCopy(e);return n[t]=r,n}function updateIn(e,t,r,n){n||(n=r,r=undefined);var i=function updateInDeeply(e,t,r,n,i,o){var a=t===u;if(n===r.length){var s=a?i:t,c=o(s);return c===s?t:c}if(!a&&!isDataStructure(t))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(quoteString)+"]: "+t);var f=r[n];var h=a?u:get(t,f,u);var p=updateInDeeply(h===u?e:isImmutable(h),h,r,n+1,i,o);return p===h?t:p===u?remove(t,f):set(a?e?emptyMap():{}:t,f,p)}(isImmutable(e),e,coerceKeyPath(t),0,r,n);return i===u?r:i}function setIn(e,t,r){return updateIn(e,t,u,(function(){return r}))}function setIn$1(e,t){return setIn(this,e,t)}function removeIn(e,t){return updateIn(e,t,(function(){return u}))}function deleteIn(e){return removeIn(this,e)}function update(e,t,r,n){return updateIn(e,[t],r,n)}function update$1(e,t,r){return 1===arguments.length?e(this):update(this,e,t,r)}function updateIn$1(e,t,r){return updateIn(this,e,t,r)}function merge(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return mergeIntoKeyedWith(this,e)}function mergeWith(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return mergeIntoKeyedWith(this,t,e)}function mergeIntoKeyedWith(e,t,r){for(var n=[],i=0;i<t.length;i++){var o=h(t[i]);0!==o.size&&n.push(o)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var t=r?function(t,n){update(e,n,u,(function(e){return e===u?t:r(e,t,n)}))}:function(t,r){e.set(r,t)},i=0;i<n.length;i++)n[i].forEach(t)})):e.constructor(n[0])}function mergeDeepWithSources(e,t,r){return mergeWithSources(e,t,function(e){return function deepMerger(t,r,n){return isDataStructure(t)&&isDataStructure(r)?mergeWithSources(t,[r],deepMerger):e?e(t,r,n):r}}(r))}function mergeWithSources(e,t,r){if(!isDataStructure(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(isImmutable(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),i=e,o=n?p:h,u=n?function(t){i===e&&(i=shallowCopy(i)),i.push(t)}:function(t,n){var o=b.call(i,n),u=o&&r?r(i[n],t,n):t;o&&u===i[n]||(i===e&&(i=shallowCopy(i)),i[n]=u)},a=0;a<t.length;a++)o(t[a]).forEach(u);return i}function mergeDeep$1(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return mergeDeepWithSources(this,e)}function mergeDeepWith$1(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return mergeDeepWithSources(this,t,e)}function mergeIn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return updateIn(this,e,emptyMap(),(function(e){return mergeWithSources(e,t)}))}function mergeDeepIn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return updateIn(this,e,emptyMap(),(function(e){return mergeDeepWithSources(e,t)}))}function withMutations(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function asMutable(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)}function asImmutable(){return this.__ensureOwner()}function wasAltered(){return this.__altered}J.prototype.cacheResult=$.prototype.cacheResult=H.prototype.cacheResult=Z.prototype.cacheResult=cacheResultThrough;var Y=function(e){function Map(t){return null===t||t===undefined?emptyMap():isMap(t)&&!isOrdered(t)?t:emptyMap().withMutations((function(r){var n=e(t);assertNotInfinite(n.size),n.forEach((function(e,t){return r.set(t,e)}))}))}return e&&(Map.__proto__=e),Map.prototype=Object.create(e&&e.prototype),Map.prototype.constructor=Map,Map.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return emptyMap().withMutations((function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}}))},Map.prototype.toString=function(){return this.__toString("Map {","}")},Map.prototype.get=function(e,t){return this._root?this._root.get(0,undefined,e,t):t},Map.prototype.set=function(e,t){return updateMap(this,e,t)},Map.prototype.remove=function(e){return updateMap(this,e,u)},Map.prototype.deleteAll=function(e){var t=f(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},Map.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=undefined,this.__altered=!0,this):emptyMap()},Map.prototype.sort=function(e){return _e(sortFactory(this,e))},Map.prototype.sortBy=function(e,t){return _e(sortFactory(this,t,e))},Map.prototype.map=function(e,t){return this.withMutations((function(r){r.forEach((function(n,i){r.set(i,e.call(t,n,i,r))}))}))},Map.prototype.__iterator=function(e,t){return new ie(this,e,t)},Map.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},Map.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?makeMap(this.size,this._root,e,this.__hash):0===this.size?emptyMap():(this.__ownerID=e,this.__altered=!1,this)},Map}(h);Y.isMap=isMap;var Q=Y.prototype;Q[R]=!0,Q["delete"]=Q.remove,Q.removeAll=Q.deleteAll,Q.setIn=setIn$1,Q.removeIn=Q.deleteIn=deleteIn,Q.update=update$1,Q.updateIn=updateIn$1,Q.merge=Q.concat=merge,Q.mergeWith=mergeWith,Q.mergeDeep=mergeDeep$1,Q.mergeDeepWith=mergeDeepWith$1,Q.mergeIn=mergeIn,Q.mergeDeepIn=mergeDeepIn,Q.withMutations=withMutations,Q.wasAltered=wasAltered,Q.asImmutable=asImmutable,Q["@@transducer/init"]=Q.asMutable=asMutable,Q["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},Q["@@transducer/result"]=function(e){return e.asImmutable()};var X=function(e,t){this.ownerID=e,this.entries=t};X.prototype.get=function(e,t,r,n){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(is(r,i[o][0]))return i[o][1];return n},X.prototype.update=function(e,t,r,n,i,o,a){for(var s=i===u,c=this.entries,f=0,h=c.length;f<h&&!is(n,c[f][0]);f++);var p=f<h;if(p?c[f][1]===i:s)return this;if(SetRef(a),(s||!p)&&SetRef(o),!s||1!==c.length){if(!p&&!s&&c.length>=oe)return function(e,t,r,n){e||(e=new OwnerID);for(var i=new re(e,hash(r),[r,n]),o=0;o<t.length;o++){var u=t[o];i=i.update(e,0,undefined,u[0],u[1])}return i}(e,c,n,i);var d=e&&e===this.ownerID,l=d?c:arrCopy(c);return p?s?f===h-1?l.pop():l[f]=l.pop():l[f]=[n,i]:l.push([n,i]),d?(this.entries=l,this):new X(e,l)}};var G=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};G.prototype.get=function(e,t,r,i){t===undefined&&(t=hash(r));var u=1<<((0===e?t:t>>>e)&o),a=this.bitmap;return 0==(a&u)?i:this.nodes[popCount(a&u-1)].get(e+n,t,r,i)},G.prototype.update=function(e,t,r,a,s,c,f){r===undefined&&(r=hash(a));var h=(0===t?r:r>>>t)&o,p=1<<h,d=this.bitmap,l=0!=(d&p);if(!l&&s===u)return this;var _=popCount(d&p-1),y=this.nodes,v=l?y[_]:undefined,S=updateNode(v,e,t+n,r,a,s,c,f);if(S===v)return this;if(!l&&S&&y.length>=ue)return function(e,t,r,n,o){for(var u=0,a=new Array(i),s=0;0!==r;s++,r>>>=1)a[s]=1&r?t[u++]:undefined;return a[n]=o,new ee(e,u+1,a)}(e,y,d,h,S);if(l&&!S&&2===y.length&&isLeafNode(y[1^_]))return y[1^_];if(l&&S&&1===y.length&&isLeafNode(S))return S;var m=e&&e===this.ownerID,g=l?S?d:d^p:d|p,I=l?S?setAt(y,_,S,m):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),o=0,u=0;u<n;u++)u===t&&(o=1),i[u]=e[u+o];return i}(y,_,m):function(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var o=new Array(i),u=0,a=0;a<i;a++)a===t?(o[a]=r,u=-1):o[a]=e[a+u];return o}(y,_,S,m);return m?(this.bitmap=g,this.nodes=I,this):new G(e,g,I)};var ee=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};ee.prototype.get=function(e,t,r,i){t===undefined&&(t=hash(r));var u=(0===e?t:t>>>e)&o,a=this.nodes[u];return a?a.get(e+n,t,r,i):i},ee.prototype.update=function(e,t,r,i,a,s,c){r===undefined&&(r=hash(i));var f=(0===t?r:r>>>t)&o,h=a===u,p=this.nodes,d=p[f];if(h&&!d)return this;var l=updateNode(d,e,t+n,r,i,a,s,c);if(l===d)return this;var _=this.count;if(d){if(!l&&--_<ae)return function(e,t,r,n){for(var i=0,o=0,u=new Array(r),a=0,s=1,c=t.length;a<c;a++,s<<=1){var f=t[a];f!==undefined&&a!==n&&(i|=s,u[o++]=f)}return new G(e,i,u)}(e,p,_,f)}else _++;var y=e&&e===this.ownerID,v=setAt(p,f,l,y);return y?(this.count=_,this.nodes=v,this):new ee(e,_,v)};var te=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};te.prototype.get=function(e,t,r,n){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(is(r,i[o][0]))return i[o][1];return n},te.prototype.update=function(e,t,r,n,i,o,a){r===undefined&&(r=hash(n));var s=i===u;if(r!==this.keyHash)return s?this:(SetRef(a),SetRef(o),mergeIntoNode(this,e,t,r,[n,i]));for(var c=this.entries,f=0,h=c.length;f<h&&!is(n,c[f][0]);f++);var p=f<h;if(p?c[f][1]===i:s)return this;if(SetRef(a),(s||!p)&&SetRef(o),s&&2===h)return new re(e,this.keyHash,c[1^f]);var d=e&&e===this.ownerID,l=d?c:arrCopy(c);return p?s?f===h-1?l.pop():l[f]=l.pop():l[f]=[n,i]:l.push([n,i]),d?(this.entries=l,this):new te(e,this.keyHash,l)};var re=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};re.prototype.get=function(e,t,r,n){return is(r,this.entry[0])?this.entry[1]:n},re.prototype.update=function(e,t,r,n,i,o,a){var s=i===u,c=is(n,this.entry[0]);return(c?i===this.entry[1]:s)?this:(SetRef(a),s?void SetRef(o):c?e&&e===this.ownerID?(this.entry[1]=i,this):new re(e,this.keyHash,[n,i]):(SetRef(o),mergeIntoNode(this,e,t,hash(n),[n,i])))},X.prototype.iterate=te.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===e(r[t?i-n:n]))return!1},G.prototype.iterate=ee.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[t?i-n:n];if(o&&!1===o.iterate(e,t))return!1}},re.prototype.iterate=function(e,t){return e(this.entry)};var ne,ie=function(e){function MapIterator(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&mapIteratorFrame(e._root)}return e&&(MapIterator.__proto__=e),MapIterator.prototype=Object.create(e&&e.prototype),MapIterator.prototype.constructor=MapIterator,MapIterator.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,i=void 0;if(r.entry){if(0===n)return mapIteratorValue(e,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return mapIteratorValue(e,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return mapIteratorValue(e,o.entry);t=this._stack=mapIteratorFrame(o,t)}continue}t=this._stack=this._stack.__prev}return iteratorDone()},MapIterator}(q);function mapIteratorValue(e,t){return iteratorValue(e,t[0],t[1])}function mapIteratorFrame(e,t){return{node:e,index:0,__prev:t}}function makeMap(e,t,r,n){var i=Object.create(Q);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function emptyMap(){return ne||(ne=makeMap(0))}function updateMap(e,t,r){var n,i;if(e._root){var o={value:!1},a={value:!1};if(n=updateNode(e._root,e.__ownerID,0,undefined,t,r,o,a),!a.value)return e;i=e.size+(o.value?r===u?-1:1:0)}else{if(r===u)return e;i=1,n=new X(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=i,e._root=n,e.__hash=undefined,e.__altered=!0,e):n?makeMap(i,n):emptyMap()}function updateNode(e,t,r,n,i,o,a,s){return e?e.update(t,r,n,i,o,a,s):o===u?e:(SetRef(s),SetRef(a),new re(t,n,[i,o]))}function isLeafNode(e){return e.constructor===re||e.constructor===te}function mergeIntoNode(e,t,r,i,u){if(e.keyHash===i)return new te(t,i,[e.entry,u]);var a,s=(0===r?e.keyHash:e.keyHash>>>r)&o,c=(0===r?i:i>>>r)&o,f=s===c?[mergeIntoNode(e,t,r+n,i,u)]:(a=new re(t,i,u),s<c?[e,a]:[a,e]);return new G(t,1<<s|1<<c,f)}function popCount(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function setAt(e,t,r,n){var i=n?e:arrCopy(e);return i[t]=r,i}var oe=i/4,ue=i/2,ae=i/4,se="@@__IMMUTABLE_LIST__@@";function isList(e){return Boolean(e&&e[se])}var ce=function(e){function List(t){var r=emptyList();if(null===t||t===undefined)return r;if(isList(t))return t;var o=e(t),u=o.size;return 0===u?r:(assertNotInfinite(u),u>0&&u<i?makeList(0,u,n,null,new he(o.toArray())):r.withMutations((function(e){e.setSize(u),o.forEach((function(t,r){return e.set(r,t)}))})))}return e&&(List.__proto__=e),List.prototype=Object.create(e&&e.prototype),List.prototype.constructor=List,List.of=function(){return this(arguments)},List.prototype.toString=function(){return this.__toString("List [","]")},List.prototype.get=function(e,t){if((e=wrapIndex(this,e))>=0&&e<this.size){var r=listNodeFor(this,e+=this._origin);return r&&r.array[e&o]}return t},List.prototype.set=function(e,t){return function(e,t,r){if((t=wrapIndex(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?setListBounds(e,t).set(0,r):setListBounds(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,i=e._root,o={value:!1};t>=getTailOffset(e._capacity)?n=updateVNode(n,e.__ownerID,0,t,r,o):i=updateVNode(i,e.__ownerID,e._level,t,r,o);if(!o.value)return e;if(e.__ownerID)return e._root=i,e._tail=n,e.__hash=undefined,e.__altered=!0,e;return makeList(e._origin,e._capacity,e._level,i,n)}(this,e,t)},List.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},List.prototype.insert=function(e,t){return this.splice(e,0,t)},List.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=n,this._root=this._tail=null,this.__hash=undefined,this.__altered=!0,this):emptyList()},List.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){setListBounds(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},List.prototype.pop=function(){return setListBounds(this,0,-1)},List.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){setListBounds(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},List.prototype.shift=function(){return setListBounds(this,1)},List.prototype.concat=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var i=t[n],o=e("string"!=typeof i&&hasIterator(i)?i:[i]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(e){r.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(r[0])},List.prototype.setSize=function(e){return setListBounds(this,0,e)},List.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){for(var i=0;i<r.size;i++)n.set(i,e.call(t,n.get(i),i,n))}))},List.prototype.slice=function(e,t){var r=this.size;return wholeSlice(e,t,r)?this:setListBounds(this,resolveBegin(e,r),resolveEnd(t,r))},List.prototype.__iterator=function(e,t){var r=t?this.size:0,n=iterateList(this,t);return new q((function(){var i=n();return i===de?iteratorDone():iteratorValue(e,t?--r:r++,i)}))},List.prototype.__iterate=function(e,t){for(var r,n=t?this.size:0,i=iterateList(this,t);(r=i())!==de&&!1!==e(r,t?--n:n++,this););return n},List.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?makeList(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?emptyList():(this.__ownerID=e,this.__altered=!1,this)},List}(p);ce.isList=isList;var fe=ce.prototype;fe[se]=!0,fe["delete"]=fe.remove,fe.merge=fe.concat,fe.setIn=setIn$1,fe.deleteIn=fe.removeIn=deleteIn,fe.update=update$1,fe.updateIn=updateIn$1,fe.mergeIn=mergeIn,fe.mergeDeepIn=mergeDeepIn,fe.withMutations=withMutations,fe.wasAltered=wasAltered,fe.asImmutable=asImmutable,fe["@@transducer/init"]=fe.asMutable=asMutable,fe["@@transducer/step"]=function(e,t){return e.push(t)},fe["@@transducer/result"]=function(e){return e.asImmutable()};var he=function(e,t){this.array=e,this.ownerID=t};he.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var i=r>>>t&o;if(i>=this.array.length)return new he([],e);var u,a=0===i;if(t>0){var s=this.array[i];if((u=s&&s.removeBefore(e,t-n,r))===s&&a)return this}if(a&&!u)return this;var c=editableVNode(this,e);if(!a)for(var f=0;f<i;f++)c.array[f]=undefined;return u&&(c.array[i]=u),c},he.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var i,u=r-1>>>t&o;if(u>=this.array.length)return this;if(t>0){var a=this.array[u];if((i=a&&a.removeAfter(e,t-n,r))===a&&u===this.array.length-1)return this}var s=editableVNode(this,e);return s.array.splice(u+1),i&&(s.array[u]=i),s};var pe,de={};function iterateList(e,t){var r=e._origin,o=e._capacity,u=getTailOffset(o),a=e._tail;return iterateNodeOrLeaf(e._root,e._level,0);function iterateNodeOrLeaf(e,s,c){return 0===s?function(e,n){var s=n===u?a&&a.array:e&&e.array,c=n>r?0:r-n,f=o-n;f>i&&(f=i);return function(){if(c===f)return de;var e=t?--f:c++;return s&&s[e]}}(e,c):function(e,u,a){var s,c=e&&e.array,f=a>r?0:r-a>>u,h=1+(o-a>>u);h>i&&(h=i);return function(){for(;;){if(s){var e=s();if(e!==de)return e;s=null}if(f===h)return de;var r=t?--h:f++;s=iterateNodeOrLeaf(c&&c[r],u-n,a+(r<<u))}}}(e,s,c)}}function makeList(e,t,r,n,i,o,u){var a=Object.create(fe);return a.size=t-e,a._origin=e,a._capacity=t,a._level=r,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=u,a.__altered=!1,a}function emptyList(){return pe||(pe=makeList(0,0,n))}function updateVNode(e,t,r,i,u,a){var s,c=i>>>r&o,f=e&&c<e.array.length;if(!f&&u===undefined)return e;if(r>0){var h=e&&e.array[c],p=updateVNode(h,t,r-n,i,u,a);return p===h?e:((s=editableVNode(e,t)).array[c]=p,s)}return f&&e.array[c]===u?e:(a&&SetRef(a),s=editableVNode(e,t),u===undefined&&c===s.array.length-1?s.array.pop():s.array[c]=u,s)}function editableVNode(e,t){return t&&e&&t===e.ownerID?e:new he(e?e.array.slice():[],t)}function listNodeFor(e,t){if(t>=getTailOffset(e._capacity))return e._tail;if(t<1<<e._level+n){for(var r=e._root,i=e._level;r&&i>0;)r=r.array[t>>>i&o],i-=n;return r}}function setListBounds(e,t,r){t!==undefined&&(t|=0),r!==undefined&&(r|=0);var i=e.__ownerID||new OwnerID,u=e._origin,a=e._capacity,s=u+t,c=r===undefined?a:r<0?a+r:u+r;if(s===u&&c===a)return e;if(s>=c)return e.clear();for(var f=e._level,h=e._root,p=0;s+p<0;)h=new he(h&&h.array.length?[undefined,h]:[],i),p+=1<<(f+=n);p&&(s+=p,u+=p,c+=p,a+=p);for(var d=getTailOffset(a),l=getTailOffset(c);l>=1<<f+n;)h=new he(h&&h.array.length?[h]:[],i),f+=n;var _=e._tail,y=l<d?listNodeFor(e,c-1):l>d?new he([],i):_;if(_&&l>d&&s<a&&_.array.length){for(var v=h=editableVNode(h,i),S=f;S>n;S-=n){var m=d>>>S&o;v=v.array[m]=editableVNode(v.array[m],i)}v.array[d>>>n&o]=_}if(c<a&&(y=y&&y.removeAfter(i,0,c)),s>=l)s-=l,c-=l,f=n,h=null,y=y&&y.removeBefore(i,0,s);else if(s>u||l<d){for(p=0;h;){var g=s>>>f&o;if(g!==l>>>f&o)break;g&&(p+=(1<<f)*g),f-=n,h=h.array[g]}h&&s>u&&(h=h.removeBefore(i,f,s-p)),h&&l<d&&(h=h.removeAfter(i,f,l-p)),p&&(s-=p,c-=p)}return e.__ownerID?(e.size=c-s,e._origin=s,e._capacity=c,e._level=f,e._root=h,e._tail=y,e.__hash=undefined,e.__altered=!0,e):makeList(s,c,f,h,y)}function getTailOffset(e){return e<i?0:e-1>>>n<<n}var le,_e=function(e){function OrderedMap(e){return null===e||e===undefined?emptyOrderedMap():isOrderedMap(e)?e:emptyOrderedMap().withMutations((function(t){var r=h(e);assertNotInfinite(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}return e&&(OrderedMap.__proto__=e),OrderedMap.prototype=Object.create(e&&e.prototype),OrderedMap.prototype.constructor=OrderedMap,OrderedMap.of=function(){return this(arguments)},OrderedMap.prototype.toString=function(){return this.__toString("OrderedMap {","}")},OrderedMap.prototype.get=function(e,t){var r=this._map.get(e);return r!==undefined?this._list.get(r)[1]:t},OrderedMap.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):emptyOrderedMap()},OrderedMap.prototype.set=function(e,t){return updateOrderedMap(this,e,t)},OrderedMap.prototype.remove=function(e){return updateOrderedMap(this,e,u)},OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},OrderedMap.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},OrderedMap.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},OrderedMap.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?makeOrderedMap(t,r,e,this.__hash):0===this.size?emptyOrderedMap():(this.__ownerID=e,this._map=t,this._list=r,this)},OrderedMap}(Y);function makeOrderedMap(e,t,r,n){var i=Object.create(_e.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i}function emptyOrderedMap(){return le||(le=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(e,t,r){var n,o,a=e._map,s=e._list,c=a.get(t),f=c!==undefined;if(r===u){if(!f)return e;s.size>=i&&s.size>=2*a.size?(n=(o=s.filter((function(e,t){return e!==undefined&&c!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=a.remove(t),o=c===s.size-1?s.pop():s.set(c,undefined))}else if(f){if(r===s.get(c)[1])return e;n=a,o=s.set(c,[t,r])}else n=a.set(t,s.size),o=s.set(s.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=undefined,e):makeOrderedMap(n,o)}_e.isOrderedMap=isOrderedMap,_e.prototype[y]=!0,_e.prototype["delete"]=_e.prototype.remove;var ye="@@__IMMUTABLE_STACK__@@";function isStack(e){return Boolean(e&&e[ye])}var ve=function(e){function Stack(e){return null===e||e===undefined?emptyStack():isStack(e)?e:emptyStack().pushAll(e)}return e&&(Stack.__proto__=e),Stack.prototype=Object.create(e&&e.prototype),Stack.prototype.constructor=Stack,Stack.of=function(){return this(arguments)},Stack.prototype.toString=function(){return this.__toString("Stack [","]")},Stack.prototype.get=function(e,t){var r=this._head;for(e=wrapIndex(this,e);r&&e--;)r=r.next;return r?r.value:t},Stack.prototype.peek=function(){return this._head&&this._head.value},Stack.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=undefined,this.__altered=!0,this):makeStack(t,r)},Stack.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&isStack(t))return t;assertNotInfinite(t.size);var r=this.size,n=this._head;return t.__iterate((function(e){r++,n={value:e,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=undefined,this.__altered=!0,this):makeStack(r,n)},Stack.prototype.pop=function(){return this.slice(1)},Stack.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=undefined,this.__hash=undefined,this.__altered=!0,this):emptyStack()},Stack.prototype.slice=function(t,r){if(wholeSlice(t,r,this.size))return this;var n=resolveBegin(t,this.size);if(resolveEnd(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=undefined,this.__altered=!0,this):makeStack(i,o)},Stack.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?makeStack(this.size,this._head,e,this.__hash):0===this.size?emptyStack():(this.__ownerID=e,this.__altered=!1,this)},Stack.prototype.__iterate=function(e,t){var r=this;if(t)return new x(this.toArray()).__iterate((function(t,n){return e(t,n,r)}),t);for(var n=0,i=this._head;i&&!1!==e(i.value,n++,this);)i=i.next;return n},Stack.prototype.__iterator=function(e,t){if(t)return new x(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new q((function(){if(n){var t=n.value;return n=n.next,iteratorValue(e,r++,t)}return iteratorDone()}))},Stack}(p);ve.isStack=isStack;var Se,me=ve.prototype;function makeStack(e,t,r,n){var i=Object.create(me);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function emptyStack(){return Se||(Se=makeStack(0))}me[ye]=!0,me.shift=me.pop,me.unshift=me.push,me.unshiftAll=me.pushAll,me.withMutations=withMutations,me.wasAltered=wasAltered,me.asImmutable=asImmutable,me["@@transducer/init"]=me.asMutable=asMutable,me["@@transducer/step"]=function(e,t){return e.unshift(t)},me["@@transducer/result"]=function(e){return e.asImmutable()};var ge="@@__IMMUTABLE_SET__@@";function isSet(e){return Boolean(e&&e[ge])}function isOrderedSet(e){return isSet(e)&&isOrdered(e)}function deepEqual(e,t){if(e===t)return!0;if(!isCollection(t)||e.size!==undefined&&t.size!==undefined&&e.size!==t.size||e.__hash!==undefined&&t.__hash!==undefined&&e.__hash!==t.__hash||isKeyed(e)!==isKeyed(t)||isIndexed(e)!==isIndexed(t)||isOrdered(e)!==isOrdered(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!isAssociative(e);if(isOrdered(e)){var n=e.entries();return t.every((function(e,t){var i=n.next().value;return i&&is(i[1],e)&&(r||is(i[0],t))}))&&n.next().done}var i=!1;if(e.size===undefined)if(t.size===undefined)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var a=!0,s=t.__iterate((function(t,n){if(r?!e.has(t):i?!is(t,e.get(n,u)):!is(e.get(n,u),t))return a=!1,!1}));return a&&e.size===s}function mixin(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function toJS(e){if(!e||"object"!=typeof e)return e;if(!isCollection(e)){if(!isDataStructure(e))return e;e=O(e)}if(isKeyed(e)){var t={};return e.__iterate((function(e,r){t[r]=toJS(e)})),t}var r=[];return e.__iterate((function(e){r.push(toJS(e))})),r}var Ie=function(e){function Set(t){return null===t||t===undefined?emptySet():isSet(t)&&!isOrdered(t)?t:emptySet().withMutations((function(r){var n=e(t);assertNotInfinite(n.size),n.forEach((function(e){return r.add(e)}))}))}return e&&(Set.__proto__=e),Set.prototype=Object.create(e&&e.prototype),Set.prototype.constructor=Set,Set.of=function(){return this(arguments)},Set.fromKeys=function(e){return this(h(e).keySeq())},Set.intersect=function(e){return(e=f(e).toArray()).length?qe.intersect.apply(Set(e.pop()),e):emptySet()},Set.union=function(e){return(e=f(e).toArray()).length?qe.union.apply(Set(e.pop()),e):emptySet()},Set.prototype.toString=function(){return this.__toString("Set {","}")},Set.prototype.has=function(e){return this._map.has(e)},Set.prototype.add=function(e){return updateSet(this,this._map.set(e,e))},Set.prototype.remove=function(e){return updateSet(this,this._map.remove(e))},Set.prototype.clear=function(){return updateSet(this,this._map.clear())},Set.prototype.map=function(e,t){var r=this,n=[],i=[];return this.forEach((function(o){var u=e.call(t,o,o,r);u!==o&&(n.push(o),i.push(u))})),this.withMutations((function(e){n.forEach((function(t){return e.remove(t)})),i.forEach((function(t){return e.add(t)}))}))},Set.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(r){for(var n=0;n<t.length;n++)e(t[n]).forEach((function(e){return r.add(e)}))})):this.constructor(t[0])},Set.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},Set.prototype.subtract=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},Set.prototype.sort=function(e){return xe(sortFactory(this,e))},Set.prototype.sortBy=function(e,t){return xe(sortFactory(this,t,e))},Set.prototype.wasAltered=function(){return this._map.wasAltered()},Set.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t){return e(t,t,r)}),t)},Set.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},Set.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},Set}(d);Ie.isSet=isSet;var we,qe=Ie.prototype;function updateSet(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function makeSet(e,t){var r=Object.create(qe);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptySet(){return we||(we=makeSet(emptyMap()))}qe[ge]=!0,qe["delete"]=qe.remove,qe.merge=qe.concat=qe.union,qe.withMutations=withMutations,qe.asImmutable=asImmutable,qe["@@transducer/init"]=qe.asMutable=asMutable,qe["@@transducer/step"]=function(e,t){return e.add(t)},qe["@@transducer/result"]=function(e){return e.asImmutable()},qe.__empty=emptySet,qe.__make=makeSet;var be,Oe=function(e){function Range(e,t,r){if(!(this instanceof Range))return new Range(e,t,r);if(invariant(0!==r,"Cannot step a Range by 0"),e=e||0,t===undefined&&(t=Infinity),r=r===undefined?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(be)return be;be=this}}return e&&(Range.__proto__=e),Range.prototype=Object.create(e&&e.prototype),Range.prototype.constructor=Range,Range.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Range.prototype.get=function(e,t){return this.has(e)?this._start+wrapIndex(this,e)*this._step:t},Range.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Range.prototype.slice=function(e,t){return wholeSlice(e,t,this.size)?this:(e=resolveBegin(e,this.size),(t=resolveEnd(t,this.size))<=e?new Range(0,0):new Range(this.get(e,this._end),this.get(t,this._end),this._step))},Range.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},Range.prototype.lastIndexOf=function(e){return this.indexOf(e)},Range.prototype.__iterate=function(e,t){for(var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==e(i,t?r-++o:o++,this);)i+=t?-n:n;return o},Range.prototype.__iterator=function(e,t){var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;return new q((function(){if(o===r)return iteratorDone();var u=i;return i+=t?-n:n,iteratorValue(e,t?r-++o:o++,u)}))},Range.prototype.equals=function(e){return e instanceof Range?this._start===e._start&&this._end===e._end&&this._step===e._step:deepEqual(this,e)},Range}(k);function getIn(e,t,r){for(var n=coerceKeyPath(t),i=0;i!==n.length;)if((e=get(e,n[i++],u))===u)return r;return e}function getIn$1(e,t){return getIn(this,e,t)}function hasIn(e,t){return getIn(e,t,u)!==u}function toObject(){assertNotInfinite(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e}f.isIterable=isCollection,f.isKeyed=isKeyed,f.isIndexed=isIndexed,f.isAssociative=isAssociative,f.isOrdered=isOrdered,f.Iterator=q,mixin(f,{toArray:function(){assertNotInfinite(this.size);var e=new Array(this.size||0),t=isKeyed(this),r=0;return this.__iterate((function(n,i){e[r++]=t?[i,n]:n})),e},toIndexedSeq:function(){return new J(this)},toJS:function(){return toJS(this)},toKeyedSeq:function(){return new $(this,!0)},toMap:function(){return Y(this.toKeyedSeq())},toObject:toObject,toOrderedMap:function(){return _e(this.toKeyedSeq())},toOrderedSet:function(){return xe(isKeyed(this)?this.valueSeq():this)},toSet:function(){return Ie(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new H(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return ve(isKeyed(this)?this.valueSeq():this)},toList:function(){return ce(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return reify(this,concatFactory(this,e))},includes:function(e){return this.some((function(t){return is(t,e)}))},entries:function(){return this.__iterator(m)},every:function(e,t){assertNotInfinite(this.size);var r=!0;return this.__iterate((function(n,i,o){if(!e.call(t,n,i,o))return r=!1,!1})),r},filter:function(e,t){return reify(this,filterFactory(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return assertNotInfinite(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){assertNotInfinite(this.size),e=e!==undefined?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!==n&&n!==undefined?n.toString():""})),t},keys:function(){return this.__iterator(v)},map:function(e,t){return reify(this,mapFactory(this,e,t))},reduce:function(e,t,r){return reduce(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return reduce(this,e,t,r,arguments.length<2,!0)},reverse:function(){return reify(this,reverseFactory(this,!0))},slice:function(e,t){return reify(this,sliceFactory(this,e,t,!0))},some:function(e,t){return!this.every(not(e),t)},sort:function(e){return reify(this,sortFactory(this,e))},values:function(){return this.__iterator(S)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==undefined?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return ensureSize(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=Y().asMutable();return e.__iterate((function(i,o){n.update(t.call(r,i,o,e),0,(function(e){return e+1}))})),n.asImmutable()}(this,e,t)},equals:function(e){return deepEqual(this,e)},entrySeq:function(){var e=this;if(e._cache)return new x(e._cache);var t=e.toSeq().map(entryMapper).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(not(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate((function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1})),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(returnTrue,null,e)},flatMap:function(e,t){return reify(this,function(e,t,r){var n=collectionClass(e);return e.toSeq().map((function(i,o){return n(t.call(r,i,o,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return reify(this,flattenFactory(this,e,!0))},fromEntrySeq:function(){return new Z(this)},get:function(e,t){return this.find((function(t,r){return is(r,e)}),undefined,t)},getIn:getIn$1,groupBy:function(e,t){return function(e,t,r){var n=isKeyed(e),i=(isOrdered(e)?_e():Y()).asMutable();e.__iterate((function(o,u){i.update(t.call(r,o,u,e),(function(e){return(e=e||[]).push(n?[u,o]:o),e}))}));var o=collectionClass(e);return i.map((function(t){return reify(e,o(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,u)!==u},hasIn:function(e){return hasIn(this,e)},isSubset:function(e){return e="function"==typeof e.includes?e:f(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:f(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return is(t,e)}))},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return maxFactory(this,e)},maxBy:function(e,t){return maxFactory(this,t,e)},min:function(e){return maxFactory(this,e?neg(e):defaultNegComparator)},minBy:function(e,t){return maxFactory(this,t?neg(t):defaultNegComparator,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return reify(this,skipWhileFactory(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(not(e),t)},sortBy:function(e,t){return reify(this,sortFactory(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return reify(this,function(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var u=0;return e.__iterate((function(e,i,a){return t.call(r,e,i,a)&&++u&&n(e,i,o)})),u},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var u=e.__iterator(m,i),a=!0;return new q((function(){if(!a)return iteratorDone();var e=u.next();if(e.done)return e;var i=e.value,s=i[0],c=i[1];return t.call(r,c,s,o)?n===m?e:iteratorValue(n,s,c,e):(a=!1,iteratorDone())}))},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(not(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===Infinity)return 0;var t=isOrdered(e),r=isKeyed(e),n=t?1:0;return function(e,t){return t=A(t,3432918353),t=A(t<<15|t>>>-15,461845907),t=A(t<<13|t>>>-13,5),t=A((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=smi((t=A(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+hashMerge(hash(e),hash(t))|0}:function(e,t){n=n+hashMerge(hash(e),hash(t))|0}:t?function(e){n=31*n+hash(e)|0}:function(e){n=n+hash(e)|0}),n)}(this))}});var Me=f.prototype;Me[a]=!0,Me[w]=Me.values,Me.toJSON=Me.toArray,Me.__toStringMapper=quoteString,Me.inspect=Me.toSource=function(){return this.toString()},Me.chain=Me.flatMap,Me.contains=Me.includes,mixin(h,{flip:function(){return reify(this,flipFactory(this))},mapEntries:function(e,t){var r=this,n=0;return reify(this,this.toSeq().map((function(i,o){return e.call(t,[o,i],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return reify(this,this.toSeq().flip().map((function(n,i){return e.call(t,n,i,r)})).flip())}});var ke=h.prototype;ke[s]=!0,ke[w]=Me.entries,ke.toJSON=toObject,ke.__toStringMapper=function(e,t){return quoteString(t)+": "+quoteString(e)},mixin(p,{toKeyedSeq:function(){return new $(this,!1)},filter:function(e,t){return reify(this,filterFactory(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return t===undefined?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return t===undefined?-1:t},reverse:function(){return reify(this,reverseFactory(this,!1))},slice:function(e,t){return reify(this,sliceFactory(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=resolveBegin(e,e<0?this.count():this.size);var n=this.slice(0,e);return reify(this,1===r?n:n.concat(arrCopy(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return reify(this,flattenFactory(this,e,!1))},get:function(e,t){return(e=wrapIndex(this,e))<0||this.size===Infinity||this.size!==undefined&&e>this.size?t:this.find((function(t,r){return r===e}),undefined,t)},has:function(e){return(e=wrapIndex(this,e))>=0&&(this.size!==undefined?this.size===Infinity||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return reify(this,function(e,t){var r=makeSequence(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return e.__iterate((function(e){return(!o||!1!==r(t,o++,i))&&!1!==r(e,o++,i)}),n),o},r.__iteratorUncached=function(r,n){var i,o=e.__iterator(S,n),u=0;return new q((function(){return(!i||u%2)&&(i=o.next()).done?i:u%2?iteratorValue(r,u++,t):iteratorValue(r,u++,i.value,i)}))},r}(this,e))},interleave:function(){var e=[this].concat(arrCopy(arguments)),t=zipWithFactory(this.toSeq(),k.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),reify(this,r)},keySeq:function(){return Oe(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return reify(this,skipWhileFactory(this,e,t,!1))},zip:function(){var e=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,e))},zipAll:function(){var e=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,e,!0))},zipWith:function(e){var t=arrCopy(arguments);return t[0]=this,reify(this,zipWithFactory(this,e,t))}});var ze=p.prototype;function reduce(e,t,r,n,i,o){return assertNotInfinite(e.size),e.__iterate((function(e,o,u){i?(i=!1,r=e):r=t.call(n,r,e,o,u)}),o),r}function keyMapper(e,t){return t}function entryMapper(e,t){return[t,e]}function not(e){return function(){return!e.apply(this,arguments)}}function neg(e){return function(){return-e.apply(this,arguments)}}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(e,t){return e<t?1:e>t?-1:0}function hashMerge(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}ze[c]=!0,ze[y]=!0,mixin(d,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),d.prototype.has=Me.includes,d.prototype.contains=d.prototype.includes,mixin(M,h.prototype),mixin(k,p.prototype),mixin(z,d.prototype);var xe=function(e){function OrderedSet(e){return null===e||e===undefined?emptyOrderedSet():isOrderedSet(e)?e:emptyOrderedSet().withMutations((function(t){var r=d(e);assertNotInfinite(r.size),r.forEach((function(e){return t.add(e)}))}))}return e&&(OrderedSet.__proto__=e),OrderedSet.prototype=Object.create(e&&e.prototype),OrderedSet.prototype.constructor=OrderedSet,OrderedSet.of=function(){return this(arguments)},OrderedSet.fromKeys=function(e){return this(h(e).keySeq())},OrderedSet.prototype.toString=function(){return this.__toString("OrderedSet {","}")},OrderedSet}(Ie);xe.isOrderedSet=isOrderedSet;var De,Ee=xe.prototype;function makeOrderedSet(e,t){var r=Object.create(Ee);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptyOrderedSet(){return De||(De=makeOrderedSet(emptyOrderedMap()))}Ee[y]=!0,Ee.zip=ze.zip,Ee.zipWith=ze.zipWith,Ee.__empty=emptyOrderedSet,Ee.__make=makeOrderedSet;var je=function(e,t){var r,n=function(o){var u=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var a=Object.keys(e),s=i._indices={};i._name=t,i._keys=a,i._defaultValues=e;for(var c=0;c<a.length;c++){var f=a[c];s[f]=c,i[f]?"object"==typeof console&&console.warn:setProp(i,f)}}this.__ownerID=undefined,this._values=ce().withMutations((function(e){e.setSize(u._keys.length),h(o).forEach((function(t,r){e.set(u._indices[r],t===u._defaultValues[r]?undefined:t)}))}))},i=n.prototype=Object.create(Ae);return i.constructor=n,t&&(n.displayName=t),n};je.prototype.toString=function(){for(var e,t=recordName(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)t+=(n?", ":"")+(e=r[n])+": "+quoteString(this.get(e));return t+" }"},je.prototype.equals=function(e){return this===e||e&&this._keys===e._keys&&recordSeq(this).equals(recordSeq(e))},je.prototype.hashCode=function(){return recordSeq(this).hashCode()},je.prototype.has=function(e){return this._indices.hasOwnProperty(e)},je.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return n===undefined?this._defaultValues[e]:n},je.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?undefined:t);if(r!==this._values&&!this.__ownerID)return makeRecord(this,r)}return this},je.prototype.remove=function(e){return this.set(e)},je.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:makeRecord(this,e)},je.prototype.wasAltered=function(){return this._values.wasAltered()},je.prototype.toSeq=function(){return recordSeq(this)},je.prototype.toJS=function(){return toJS(this)},je.prototype.entries=function(){return this.__iterator(m)},je.prototype.__iterator=function(e,t){return recordSeq(this).__iterator(e,t)},je.prototype.__iterate=function(e,t){return recordSeq(this).__iterate(e,t)},je.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?makeRecord(this,t,e):(this.__ownerID=e,this._values=t,this)},je.isRecord=isRecord,je.getDescriptiveName=recordName;var Re,Ae=je.prototype;function makeRecord(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function recordName(e){return e.constructor.displayName||e.constructor.name||"Record"}function recordSeq(e){return keyedSeqFromValue(e._keys.map((function(t){return[t,e.get(t)]})))}function setProp(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(r){}}function defaultConverter(e,t){return isKeyed(t)?t.toMap():t.toList()}Ae[_]=!0,Ae["delete"]=Ae.remove,Ae.deleteIn=Ae.removeIn=deleteIn,Ae.getIn=getIn$1,Ae.hasIn=Me.hasIn,Ae.merge=merge,Ae.mergeWith=mergeWith,Ae.mergeIn=mergeIn,Ae.mergeDeep=mergeDeep$1,Ae.mergeDeepWith=mergeDeepWith$1,Ae.mergeDeepIn=mergeDeepIn,Ae.setIn=setIn$1,Ae.update=update$1,Ae.updateIn=updateIn$1,Ae.withMutations=withMutations,Ae.asMutable=asMutable,Ae.asImmutable=asImmutable,Ae[w]=Ae.entries,Ae.toJSON=Ae.toObject=Me.toObject,Ae.inspect=Ae.toSource=function(){return this.toString()};var Ce={version:"4.0.0-rc.11",Collection:f,Iterable:f,Seq:O,Map:Y,OrderedMap:_e,List:ce,Stack:ve,Set:Ie,OrderedSet:xe,Record:je,Range:Oe,Repeat:function(e){function Repeat(e,t){if(!(this instanceof Repeat))return new Repeat(e,t);if(this._value=e,this.size=t===undefined?Infinity:Math.max(0,t),0===this.size){if(Re)return Re;Re=this}}return e&&(Repeat.__proto__=e),Repeat.prototype=Object.create(e&&e.prototype),Repeat.prototype.constructor=Repeat,Repeat.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Repeat.prototype.get=function(e,t){return this.has(e)?this._value:t},Repeat.prototype.includes=function(e){return is(this._value,e)},Repeat.prototype.slice=function(e,t){var r=this.size;return wholeSlice(e,t,r)?this:new Repeat(this._value,resolveEnd(t,r)-resolveBegin(e,r))},Repeat.prototype.reverse=function(){return this},Repeat.prototype.indexOf=function(e){return is(this._value,e)?0:-1},Repeat.prototype.lastIndexOf=function(e){return is(this._value,e)?this.size:-1},Repeat.prototype.__iterate=function(e,t){for(var r=this.size,n=0;n!==r&&!1!==e(this._value,t?r-++n:n++,this););return n},Repeat.prototype.__iterator=function(e,t){var r=this,n=this.size,i=0;return new q((function(){return i===n?iteratorDone():iteratorValue(e,t?n-++i:i++,r._value)}))},Repeat.prototype.equals=function(e){return e instanceof Repeat?is(this._value,e._value):deepEqual(e)},Repeat}(k),is:is,fromJS:function(e,t){return function fromJSWith(e,t,r,n,i,o){var u=Array.isArray(r)?k:isPlainObj(r)?M:null;if(u){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),i&&""!==n&&i.push(n);var a=t.call(o,n,u(r).map((function(n,o){return fromJSWith(e,t,n,o,i,r)})),i&&i.slice());return e.pop(),i&&i.pop(),a}return r}([],t||defaultConverter,e,"",t&&t.length>2?[]:undefined,{"":e})},hash:hash,isImmutable:isImmutable,isCollection:isCollection,isKeyed:isKeyed,isIndexed:isIndexed,isAssociative:isAssociative,isOrdered:isOrdered,isValueObject:isValueObject,isSeq:isSeq,isList:isList,isMap:isMap,isOrderedMap:isOrderedMap,isStack:isStack,isSet:isSet,isOrderedSet:isOrderedSet,isRecord:isRecord,get:get,getIn:getIn,has:has,hasIn:hasIn,merge:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return mergeWithSources(e,t)},mergeDeep:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return mergeDeepWithSources(e,t)},mergeWith:function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return mergeWithSources(t,r,e)},mergeDeepWith:function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return mergeDeepWithSources(t,r,e)},remove:remove,removeIn:removeIn,set:set,setIn:setIn,update:update,updateIn:updateIn};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t["default"]=class{constructor(e){_defineProperty(this,"option",void 0),_defineProperty(this,"stack",void 0),_defineProperty(this,"index",void 0),this.option=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({maxSize:100},e),this.stack=Ce.List(),this.index=-1}get size(){return this.stack.size}get current(){return this.go(this.index)}data2state(e){return e instanceof Ce.Collection?{value:Ce.fromJS(e),type:"immutable"}:{value:Ce.fromJS(e),type:typeof e}}state2data({value:e,type:t}){return"immutable"===t?e:e instanceof Ce.Collection?e.toJS():e}sliceStack(e=this.index){return this.stack.slice(0,e+1)}checkStackSize(){const{maxSize:e}=this.option;this.size>=e&&(this.stack=this.stack.slice(-e),this.index=e-1)}pushState(e){this.stack=this.sliceStack(this.index).push(this.data2state(e)),this.index+=1,this.checkStackSize()}replaceState(e){this.stack=this.sliceStack(this.index).splice(this.index,1,this.data2state(e))}removeState(e){return!(e<0||e>=this.size)&&(this.stack=this.stack.splice(e,1),!0)}go(e){e<0?this.index=0:e>=this.size?this.index=this.size:this.index=e;const t=this.stack.get(this.index);return this.state2data(t)}back(){return this.go(this.index-1)}forward(){return this.go(this.index+1)}clear(){this.stack=Ce.List(),this.index=-1}}}])["default"]}));